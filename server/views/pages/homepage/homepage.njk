{% extends "../../partials/layout.njk" %}
{% from "govuk/components/accordion/macro.njk" import govukAccordion %}
{% from "probation/case-search/macro.njk" import caseSearch %}

{% set mainClasses = "app-container govuk-body" %}

{% block header %}
  {% include "../../partials/header.njk" %}
  {% block banner %}{% endblock %}
  <div class="dps-header">
    <div class="govuk-width-container">
      <h1 class="govuk-heading-l" data-qa="pageHeading">Manage people on probation</h1>
    </div>
  </div>
  <div class="dps-homepage-search">
    <div class="govuk-width-container">
      {{ caseSearch({
                id: "search",
                results: searchResults,
                label: {
                    html: '<h1 class="govuk-label-wrapper"><label class="govuk-label moj-search__label govuk-label--m" for="search">Find a person on probation</label></h1>'
                }
            }) }}
      <p>
        <a class="govuk-link govuk-link--no-visited-state" href="/case">View your cases</a>
      </p>
    </div>
  </div>
{% endblock %}

{% set appointmentsTable %}
{% include './_appointments.njk' %}
{% endset %}

{% set outcomesTable %}
{% include './_outcomes.njk' %}
{% endset %}

{% block content %}
  {{ govukAccordion({
    id: "accordion-default",
    items: [
      {
        heading: {
            text: "Today's appointments (" + appointments.length + ")"
        },
        content: {
            html: appointmentsTable
        }
      }
    ]
  }) }}

  {{ govukAccordion({
    id: "accordion-default",
    items: [
      {
        heading: {
            text: "Outcomes to log (" + outcomes.length + ")"
        },
        content: {
            html: outcomesTable
        }
      }
    ]
  }) }}
{% endblock %}