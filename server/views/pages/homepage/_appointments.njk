{% from "govuk/components/table/macro.njk" import govukTable %}

{% set tableData = {
  firstCellIsHeader: true,
  head: [
    {
      text: "Person on probation"
    },
    {
      classes: 'govuk-!-text-align-right',
      text: "Appointment type"
    },
    {
      classes: 'govuk-!-text-align-right',
      text: "Location"
    },
    {
      classes: 'govuk-!-text-align-right',
      text: "Time"
    }
  ],
  rows: []
} %}


{% for appointment in appointments %}
    {% set row = tableData.rows.push([
        {
            html: '<a class="govuk-!-font-weight-regular" href="./case-listings/case/X172592?journey=appointments&amp;action=create">' + appointment.caseName.surname + ', ' + appointment.caseName.forename + '</a><br><span class="govuk-!-font-weight-bold secondary-text">' + appointment.crn + '</span>'
        },
        {
            classes: 'govuk-!-text-align-right',
            html: '<a class="govuk-link" href="/case-listings/case/X172592/MFM/appointment-detail">' + appointment.description + '</a>'
        },
        {
            classes: 'govuk-!-text-align-right',
            text: appointment.location
        },
        {
            classes: 'govuk-!-text-align-right',
            text: appointment.startTime | shortTime + ' to ' + appointment.endTime | shortTime
        }
    ]) %}
{% endfor %}

<div class="govuk-!-padding-3 govuk-!-padding-top-1">
  {{ govukTable(tableData) }}
  <p>
      <a class="govuk-link govuk-link--no-visited-state" href="/caseload/appointments/upcoming">View all upcoming appointments</a>
  </p>
</div>